var WebGrid=function(){function n(n,t){return"Visibility#"+n+"#"+t}function s(n){return n+"_Sort"}function h(n){return n+"_SortDirection"}function l(f,e){function rt(){w==!0&&(ut()?k():d())}function ut(){var n=$("[webgrid-column-name='"+e+"']",f);return!$(n).hasClass("hidden")}function k(){var t=$("[webgrid-column-name='"+e+"']",f);$(t).addClass("hidden");$.cookie(n(c,e),!1,{expires:1e4});$(f).trigger(r,e)}function d(){var t=$("[webgrid-column-name='"+e+"']",f);$(t).removeClass("hidden");$.cookie(n(c,e),!0,{expires:1e4});$(f).trigger(u,e)}function ft(n,t){var i=g(),r,u;t!=!0?(r=$.inArray(n,i),r>=0&&i.splice(r,1)):$.inArray(n,i)<0&&i.push(n);i.length?(u=JSON.stringify(i),$.cookie(a,u)):$.removeCookie(a)}function g(){if($.cookie(a)){var n=$.cookie(a);if(n)return JSON.parse(n)}return[]}function y(n,i){if(console.log("Spalte "+e+" wird nach "+n+" gefiltert."),l==!0){var r=$("tbody, .tbody",$(f)),u=$("tr.webGridRow, .tr.webGridRow",r);u.each(function(){var u=$(this),t=$("[webgrid-column-name='"+e+"']",u),r=$(t).attr("webgrid-cell-value-as-text");i&&r==n&&$(t).addClass("filtered");i||r!=n||$(t).removeClass("filtered")});$(f).trigger(t,this);et();ft(n,i);ot()}}function et(){if(l==!0){var t=$(o).attr("can-filter-by-column-content"),i=$(o).attr("is-filter-by-column-content"),r=$("td[webgrid-column-name='"+e+"'].filtered, .td[webgrid-column-name='"+e+"'].filtered"),n=$("a.webgrid-filter-by-column-link",o);n!=""&&(r.length>0?($(n).html(i),$(n).addClass("filtered")):($(n).html(t),$(n).removeClass("filtered")))}}function ot(){if(l==!0){var n=$("#filter_by_column_"+c+"_"+e),t=$('input[type="checkbox"].filter-all-checkbox',n),i=$("input:checkbox:not(:checked).filter-single-checkbox",n),r=i.length>0;$(t).prop("checked",!r)}}function nt(n){if(b==!0){n||(n=$(f).attr("sort-column",e));n=="desc"&&($(f).attr("sort-column",e),$(f).attr("sort-direction","asc"));var u=$("thead, .thead",f),r=$("tbody, .tbody",f),o=$(f).attr("sort-column"),l=$(f).attr("sort-direction"),t="asc";o==e&&l=="asc"&&(t="desc");var a=$("tr.webGridRow, .tr.webGridRow",r),v=$.makeArray($(a).remove()),y=v.sort(function(n,i){var r=$("[webgrid-column-name='"+e+"']",n).attr("webgrid-row-index"),u=$("[webgrid-column-name='"+e+"']",i).attr("webgrid-row-index");return t=="asc"?r-u:u-r});$(r).html(y);$("td, .td, th, .th",u).each(function(){var n=$(this),u=n.attr("sort-content-none"),f=n.attr("sort-content-asc"),o=n.attr("sort-content-desc"),i=u,r;n.attr("webgrid-column-name")==e?t=="desc"?(i=o,n.data("sort","desc")):(i=f,n.data("sort","asc")):n.data("sort","none");r=$("a.webgrid-sort-by-column-link",this);r!=""&&$(r).html(i)});$.cookie(s(c),e);$.cookie(h(c),t);$(f).attr("sort-column",e);$(f).attr("sort-direction",t);$(f).trigger(i,[e,t=="desc"])}}function st(){if(b==!0)$("a.webgrid-sort-by-column-link",o).on("click",function(n){n.preventDefault();nt()})}function tt(){if(l==!0){var t="#"+$(v).attr("data-toggle-target"),n=$(t,$(f));n.on("click",function(n){n.stopPropagation()});$(document).on("click",function(){n.slideUp("fast")});$(".webgrid-filter-by-column-link").click(function(t){v[0]!=t.currentTarget&&n.slideUp("fast")});n.slideToggle("fast")}}function ht(){var r;if(l==!0){$(v).on("click",function(n){n.preventDefault();n.stopPropagation();tt()});var n=$("#filter_by_column_"+c+"_"+e),t=$('input[type="checkbox"].filter-single-checkbox',n),i=$(".filter-all-checkbox",n);$(i).on("change",function(){var n=$(i).prop("checked");t.each(function(t,i){$(i).prop("checked",n);$(i).change()})});$(t).each(function(n,t){$(t).on("change",function(){y($(t).data("filter-value"),!$(t).is(":checked"))})});it&&(r=g(),$(r).each(function(t,i){y(i,!0);var r=$('input[type="checkbox"][data-filter-value="'+i+'"].filter-single-checkbox',n);r.length>0&&(r.prop("checked",!1),$('input[type="checkbox"].filter-all-checkbox',n).prop("checked",!1))}))}}var c=$(f).attr("id"),o=$(".th[webgrid-column-name='"+e+"'], th[webgrid-column-name='"+e+"']",$(f))||$(),l=$(o).attr("webgrid-column-can-filter")=="True",w=$(o).attr("webgrid-column-can-hide")=="True",b=$(o).attr("webgrid-column-can-sort")=="True",it=$(o).attr("webgrid-column-save-filter")=="True",a=$(o).attr("webgrid-column-save-filter-key")||c+"_"+e,v=null,p;return l&&(v=$("a.webgrid-filter-by-column-link",o)),p=$.cookie(n(c,e)),p=="false"?$("[webgrid-column-name='"+e+"']",f).addClass("hidden"):p=="true"&&$("[webgrid-column-name='"+e+"']",f).removeClass("hidden"),st(),ht(),{toggle:rt,show:d,hide:k,filterByColumn:y,sortByColumn:nt,name:e,webGrid:f,canHide:w,canFilter:l,showFilter:tt}}function a(n){function r(t,i){var u,r;(t<1||t==undefined)&&(t=1);t>i&&(t=i);var f=$("li.directpagelink",n),e=f.length,o=e;for(u=1;u<i&&o<i&&u<t-e/2;u++)o++;r=u;$(f).removeClass("active");$(f).each(function(){$("a",this).html(r);$("a",this).data("goto-page",r);t==r&&$(this).addClass("active");r>i?$(this).hide():$(this).show();r++})}function t(n){$(i).trigger(o,{page:n})}if(n.length<=0)return undefined;$("li a",n).click(function(n){t($(this).data("goto-page"));n.preventDefault()});var i={goToPage:t,goneToPage:r};return i}function v(n){function h(n){var r=$(".toggle-column-group[column-header-group='"+n+"']").prop("checked"),u=$(".toggle-column[column-header-group='"+n+"']",t);$(u).each(function(){var n=$(this).attr("webgrid-column-name");r?i(n):o(n)});$(".toggle-column-group[column-header-group='"+n+"']").prop("checked",r)}function i(t){$(n).trigger(e,t)}function o(t){$(n).trigger(f,t)}function s(n){var i=$(".toggle-column-group[column-header-group='"+n+"']",t),r=$(".toggle-column[column-header-group='"+n+"']:not(:checked)",t).length>0;i.prop("checked",!r)}var t=$("#column_visibility_"+$(n).attr("id"));if($(t).length==0)return null;$("input[type=checkbox].toggle-column-group",$(t)).each(function(n,t){var i=$(t).attr("column-header-group");$(t).click(function(){h(i)})});$("input[type=checkbox].toggle-column",$(t)).each(function(n,t){var r=$(t).attr("webgrid-column-name");$(t).click(function(){var n=$(t).prop("checked");n?i(r):o(r)})});$("button.toggle-column-group",$(t)).each(function(n,t){console.log("Column-Header-Group-Toggle-Button wird initialisiert.");var i=$(t).parent("div.column-header-group").find(".column-header-group-items");$(t).click(function(){console.log("Column-Header-Group-Toggle-Button wurde geklickt.");$(t).toggleClass("expanded");$(i).toggleClass("visible")})});$(n).on(u,function(n,t){var i=$(".toggle-column[webgrid-column-name='"+t+"']");i.prop("checked",!0);i.attr("column-header-group")&&s(i.attr("column-header-group"))});$(n).on(r,function(n,t){var i=$(".toggle-column[webgrid-column-name='"+t+"']");i.prop("checked",!1);i.attr("column-header-group")&&s(i.attr("column-header-group"))});return{}}function y(n){function u(n){var t=null;return $(k).each(function(i,r){r.name==n&&(t=r)}),t}function it(){var t=$("ul.pagination[pagination-table='"+$(r).attr("id")+"']"),n;if(t.length>0){n=new a(t);$(n).on(o,function(n,t){y(t.page)});return n}return null}function y(n){var f=$(r).attr("pagination-currentpage"),u,s,h,o;f==undefined&&(f=1);var t=$(r).attr("pagination-invisiblerow-class"),e=$("tr.webGridRow:not(.filtered), .tr.webGridRow:not(.filtered)",d),l=$("tr.webGridRow.filtered, .tr.webGridRow.filtered",d),i=$(r).attr("pagination-pagesize");i==undefined&&(i=e.length);u=parseInt(e.length/i);e.length%i>0&&u++;n=="left"?n=--f:n=="right"?n=++f:n=="first"?n=1:n=="last"&&(n=u);(n<1||n==undefined)&&(n=1);n>u&&(n=u);s=n*i-i+1;h=n*i;l.each(function(){var n=$(this);t==""||t==undefined?$(n).hide():$(n).addClass(t)});o=1;e.each(function(){var n=$(this);o>=s&&o<=h?t==""||t==undefined?$(n).show():$(n).removeClass(t):t==""||t==undefined?$(n).hide():$(n).addClass(t);o++});$(r).attr("pagination-currentpage",n);$(r).trigger(c,{page:n,maxPage:u});b!=null&&b.goneToPage(n,u)}function p(){var n=$(r).attr("pagination-currentpage");y(n)}var r=$(n),g,nt,tt;if(r.length!=1)return null;var w=$(r).attr("id"),b=it(),rt=new v(r),k=[],d=$("tbody, .tbody",$(r));$(r).on(t,function(){var n=$("tr.webGridRow, .tr.webGridRow",d);n.each(function(){var n=$(this),t=$(n).children("td.filtered, .td.filtered");t.length>0?$(n).addClass("filtered"):$(n).removeClass("filtered")});p()});$(r).on(i,function(){p()});$(r).on(e,function(n,t){u(t).show()});$(r).on(f,function(n,t){u(t).hide()});return $(".th[webgrid-column-name], th[webgrid-column-name]",n).each(function(n,t){var f=$(t).attr("webgrid-column-name"),i=new l(r,f),u;k[n]=i;u=$.cookie(w+"#"+f);u=="false"?i.hide():u=="true"&&i.show()}),g=$.cookie(s(w)),nt=$.cookie(h(w)),g!=undefined&&(tt=u(g),tt.sortByColumn(nt)),{pagination:b,columns:k,visibilityControl:rt,getColumnByName:u,refresh:p,goToPage:y}}var t="webgrid.column:filtered",i="webgrid.column:sorted",r="webgrid.column:hidden",u="webgrid.column:shown",f="webgrid.column:hide",e="webgrid.column:show",c="webgrid.pagination:gone-to",o="webgrid.pagination:goto";return{webGridControl:y}}();$=jQuery;$.fn.extend({webgrid:function(){return this.each(function(){WebGrid.webGridControl(this)})}});$(function(){$(".webGrid.init").webgrid()});
//# sourceMappingURL=webgrid.min.js.map
